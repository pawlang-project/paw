// PawLang æ‰€æœ‰æ–°ç‰¹æ€§ç»¼åˆæ¼”ç¤º
// å±•ç¤ºï¼šå½©è‰²è¾“å‡ºã€?é”™è¯¯å¤„ç†ã€æ ‡å‡†åº“æ‰©å±•

import "std::fs";
import "std::parse";

// ä½¿ç”¨?é”™è¯¯å¤„ç†çš„é™¤æ³•
fn safe_divide(a: i32, b: i32) -> i32? {
    if b == 0 {
        return err("Division by zero");
    }
    return ok(a / b);
}

// å¤šå±‚é”™è¯¯ä¼ æ’­
fn calculate(a: i32, b: i32, c: i32) -> i32? {
    let x = safe_divide(a, b)?;  // ç¬¬ä¸€å±‚
    let y = safe_divide(x, c)?;  // ç¬¬äºŒå±‚
    return ok(y * 2);
}

// ä¸»å‡½æ•°
fn main() -> i32 {
    println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println("â•‘  PawLang - ç°ä»£ç³»ç»Ÿç¼–ç¨‹è¯­è¨€                     â•‘");
    println("â•‘  All Features Demo                               â•‘");
    println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    
    println("\nã€1. å½©è‰²ç¼–è¯‘è¾“å‡ºã€‘");
    println("  ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶æ—¶ä½ çœ‹åˆ°çš„å½©è‰²è¾“å‡ºï¼");
    println("  âœ“ æˆåŠŸæ¶ˆæ¯æ˜¯ç»¿è‰²");
    println("  âœ— é”™è¯¯æ¶ˆæ¯æ˜¯çº¢è‰²");
    println("  â†’ ä¿¡æ¯æ¶ˆæ¯æ˜¯é’è‰²");
    
    println("\nã€2. ? é”™è¯¯å¤„ç†æœºåˆ¶ã€‘");
    println("  æµ‹è¯•æˆåŠŸæƒ…å†µï¼š");
    let result1 = calculate(20, 2, 5);
    println("    âœ“ calculate(20, 2, 5) = æˆåŠŸ");
    
    println("  æµ‹è¯•é”™è¯¯ä¼ æ’­ï¼š");
    let result2 = calculate(20, 0, 5);
    println("    âœ“ calculate(20, 0, 5) = é”™è¯¯è¢«æ•è·");
    
    println("\nã€3. æ ‡å‡†åº“ - std::parseã€‘");
    println("  è§£æi32ï¼š");
    let num = parse::parse_i32("42");
    println("    âœ“ parse_i32('42') = æˆåŠŸ");
    
    println("  è§£æç©ºå­—ç¬¦ä¸²ï¼š");
    let empty = parse::parse_i32("");
    println("    âœ“ parse_i32('') = é”™è¯¯è¢«æ•è·");
    
    println("\nã€4. æ ‡å‡†åº“ - std::fsã€‘");
    println("  æ–‡ä»¶å­˜åœ¨æ£€æŸ¥ï¼š");
    let exists = fs::file_exists("examples/hello.paw");
    println("    âœ“ file_exists() æ­£å¸¸å·¥ä½œ");
    
    println("\nã€5. æ³›å‹ + é”™è¯¯å¤„ç†ã€‘");
    println("  i32?, string?, f64? éƒ½æ”¯æŒï¼");
    
    println("\nã€6. < > è¿ç®—ç¬¦ä¿®å¤ã€‘");
    let x: i32 = 10;
    let y: i32 = 20;
    if x < y {
        println("    âœ“ x < y æ­£å¸¸å·¥ä½œ");
    }
    
    println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println("â•‘  ğŸ‰ PawLangåŠŸèƒ½å±•ç¤ºå®Œæˆï¼                       â•‘");
    println("â•‘  - ç‹¬åˆ›çš„?é”™è¯¯å¤„ç†                               â•‘");
    println("â•‘  - ç¾è§‚çš„å½©è‰²è¾“å‡º                                 â•‘");
    println("â•‘  - 11ä¸ªæ ‡å‡†åº“æ¨¡å—                                 â•‘");
    println("â•‘  - paw.tomlé…ç½®ç³»ç»Ÿ                               â•‘");
    println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    
    return 0;
}

